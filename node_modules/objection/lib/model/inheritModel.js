'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _create = require('babel-runtime/core-js/object/create');

var _create2 = _interopRequireDefault(_create);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var cache = (0, _create2.default)(null);
var createInheritor = void 0;

if (isClassKeywordSupported()) {
  createInheritor = createClassInheritor;
} else {
  createInheritor = createFunctionInheritor;
}

exports.default = function (ModelClass) {
  var inherit = cache[ModelClass.name];

  if (!inherit) {
    inherit = createInheritor(ModelClass.name);
    cache[ModelClass.name] = inherit;
  }

  return inherit(ModelClass);
};

function createFunctionInheritor(className) {
  return new Function('BaseClass', '\n    function ' + className + '() { \n      BaseClass.apply(this, arguments); \n    }\n    \n    BaseClass.extend(' + className + ');\n    return ' + className + ';\n  ');
}

function createClassInheritor(className) {
  return new Function('BaseClass', '\n    return class ' + className + ' extends BaseClass {\n    \n    }\n  ');
}

function isClassKeywordSupported() {
  try {
    createClassInheritor('Test');
    return true;
  } catch (err) {
    return false;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluaGVyaXRNb2RlbC5qcyJdLCJuYW1lcyI6WyJjYWNoZSIsImNyZWF0ZUluaGVyaXRvciIsImlzQ2xhc3NLZXl3b3JkU3VwcG9ydGVkIiwiY3JlYXRlQ2xhc3NJbmhlcml0b3IiLCJjcmVhdGVGdW5jdGlvbkluaGVyaXRvciIsIk1vZGVsQ2xhc3MiLCJpbmhlcml0IiwibmFtZSIsImNsYXNzTmFtZSIsIkZ1bmN0aW9uIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSxJQUFNQSxRQUFRLHNCQUFjLElBQWQsQ0FBZDtBQUNBLElBQUlDLHdCQUFKOztBQUVBLElBQUlDLHlCQUFKLEVBQStCO0FBQzdCRCxvQkFBa0JFLG9CQUFsQjtBQUNELENBRkQsTUFFTztBQUNMRixvQkFBa0JHLHVCQUFsQjtBQUNEOztrQkFFYyxVQUFDQyxVQUFELEVBQWdCO0FBQzdCLE1BQUlDLFVBQVVOLE1BQU1LLFdBQVdFLElBQWpCLENBQWQ7O0FBRUEsTUFBSSxDQUFDRCxPQUFMLEVBQWM7QUFDWkEsY0FBVUwsZ0JBQWdCSSxXQUFXRSxJQUEzQixDQUFWO0FBQ0FQLFVBQU1LLFdBQVdFLElBQWpCLElBQXlCRCxPQUF6QjtBQUNEOztBQUVELFNBQU9BLFFBQVFELFVBQVIsQ0FBUDtBQUNELEM7O0FBRUQsU0FBU0QsdUJBQVQsQ0FBaUNJLFNBQWpDLEVBQTRDO0FBQzFDLFNBQU8sSUFBSUMsUUFBSixDQUFhLFdBQWIsc0JBQ01ELFNBRE4sMkZBS2NBLFNBTGQsdUJBTUlBLFNBTkosV0FBUDtBQVFEOztBQUVELFNBQVNMLG9CQUFULENBQThCSyxTQUE5QixFQUF5QztBQUN2QyxTQUFPLElBQUlDLFFBQUosQ0FBYSxXQUFiLDBCQUNVRCxTQURWLDJDQUFQO0FBS0Q7O0FBRUQsU0FBU04sdUJBQVQsR0FBbUM7QUFDakMsTUFBSTtBQUNGQyx5QkFBcUIsTUFBckI7QUFDQSxXQUFPLElBQVA7QUFDRCxHQUhELENBR0UsT0FBT08sR0FBUCxFQUFZO0FBQ1osV0FBTyxLQUFQO0FBQ0Q7QUFDRiIsImZpbGUiOiJpbmhlcml0TW9kZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5sZXQgY3JlYXRlSW5oZXJpdG9yO1xuXG5pZiAoaXNDbGFzc0tleXdvcmRTdXBwb3J0ZWQoKSkge1xuICBjcmVhdGVJbmhlcml0b3IgPSBjcmVhdGVDbGFzc0luaGVyaXRvcjtcbn0gZWxzZSB7XG4gIGNyZWF0ZUluaGVyaXRvciA9IGNyZWF0ZUZ1bmN0aW9uSW5oZXJpdG9yO1xufVxuXG5leHBvcnQgZGVmYXVsdCAoTW9kZWxDbGFzcykgPT4ge1xuICBsZXQgaW5oZXJpdCA9IGNhY2hlW01vZGVsQ2xhc3MubmFtZV07XG5cbiAgaWYgKCFpbmhlcml0KSB7XG4gICAgaW5oZXJpdCA9IGNyZWF0ZUluaGVyaXRvcihNb2RlbENsYXNzLm5hbWUpO1xuICAgIGNhY2hlW01vZGVsQ2xhc3MubmFtZV0gPSBpbmhlcml0O1xuICB9XG5cbiAgcmV0dXJuIGluaGVyaXQoTW9kZWxDbGFzcyk7XG59O1xuXG5mdW5jdGlvbiBjcmVhdGVGdW5jdGlvbkluaGVyaXRvcihjbGFzc05hbWUpIHtcbiAgcmV0dXJuIG5ldyBGdW5jdGlvbignQmFzZUNsYXNzJywgYFxuICAgIGZ1bmN0aW9uICR7Y2xhc3NOYW1lfSgpIHsgXG4gICAgICBCYXNlQ2xhc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgXG4gICAgfVxuICAgIFxuICAgIEJhc2VDbGFzcy5leHRlbmQoJHtjbGFzc05hbWV9KTtcbiAgICByZXR1cm4gJHtjbGFzc05hbWV9O1xuICBgKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2xhc3NJbmhlcml0b3IoY2xhc3NOYW1lKSB7XG4gIHJldHVybiBuZXcgRnVuY3Rpb24oJ0Jhc2VDbGFzcycsIGBcbiAgICByZXR1cm4gY2xhc3MgJHtjbGFzc05hbWV9IGV4dGVuZHMgQmFzZUNsYXNzIHtcbiAgICBcbiAgICB9XG4gIGApO1xufVxuXG5mdW5jdGlvbiBpc0NsYXNzS2V5d29yZFN1cHBvcnRlZCgpIHtcbiAgdHJ5IHtcbiAgICBjcmVhdGVDbGFzc0luaGVyaXRvcignVGVzdCcpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuXG5cbiJdfQ==